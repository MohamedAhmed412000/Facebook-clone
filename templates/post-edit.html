{% extends 'base.html' %}
{% load static %}

{% block title %}Post edit{% endblock title %}

{% block addons %}
    <script src="{% static 'js/jquery-3.6.1.min.js' %}"></script>
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
{% endblock %}

{% block body %}
<div class="container">
  <div class="row flex-lg-nowrap">
    <div class="row">
      <div class="col-md-12">
        <div class="top-breadcrumb">
          <br>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="{% url 'index' %}" style="color:#121212;">Home</a></li>
              {% if request.user == post.user %}
              <li class="breadcrumb-item"><a href="{% url 'profile' request.user.id %}" style="color:#121212;">Profile page</a></li>
              {% endif %}
              <li class="breadcrumb-item active"><a href="{% url 'show-post' post.id %}" style="color:#121212;">Post</a></li>
              <li class="breadcrumb-item active" aria-current="page">Edit</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  
    <div class="col">
      <div class="row">
        <div class="col mb-3">
          <div class="card">
            <div class="card-body">
              <div class="e-profile">
                <form action="" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  {% if not post.is_shared %}
                    <div class="row-2">
                      <div class="col-12 col-sm-auto mb-3">
                        <div class="text-center text-sm-left mb-2 mb-sm-0">
                          <h4 class="pt-sm-2 pb-1 mb-0 text-nowrap">Post images</h4>
                        </div>
                        {% if post.has_img %}
                          <div class="mx-auto">
                            <div class="card-body info-card social-about" style="overflow: scroll; margin: -15px 0 -20px 0;">
                              <div style="display: inline-block; height: 200px; overflow: scroll;">
                                  {% for img in post.imgs %}
                                      <a href="{{img.url}}"><img src="{{img.url}}" width="100%" style="display: inline-block;"></a>
                                  {% endfor %}
                              </div>
                            </div>
                          </div>
                        {% endif %}
                        </div>
                        <div class="col d-flex flex-column flex-sm-row justify-content-center mb-3">
                          <div class="text-center text-sm-left mb-2 mb-sm-0">
                            <div class="mt-2">
                              <input id="add-imgs" type="file" hidden="" name="add-img" accept="image/*" multiple>
                              <label  class="btn btn-primary" style="background:#121212;border-color:#121212;" for="add-imgs">add</label>
                              {% if post.has_img %}
                                <input id="change-imgs" type="file" hidden="" name="change-img" accept="image/*" multiple>
                                <label  class="btn btn-primary" style="background:#121212;border-color:#121212;" for="change-imgs">Change</label>
                                <button class="btn btn-outline" style="color:red" type="button">
                                  <span>Remove</span>
                                </button>
                              {% endif %}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <hr>
                    <div class="row-2">
                      <div class="col-12 col-sm-auto mb-3">
                        <div class="text-center text-sm-left mb-2 mb-sm-0">
                          <h4 class="pt-sm-2 pb-1 mb-0 text-nowrap">Post videos</h4>
                        </div>
                        {% if post.has_vid %}
                          <div class="mx-auto">
                            <div class="card-body info-card social-about" style="overflow: scroll; margin: -15px 0 -20px 0;">
                              <div style="display: inline-block; height: 200px; overflow: scroll;">
                                {% for vid in post.vids %}
                                  <video src="{{vid.url}}" width="100%" controls></video>
                                {% endfor %}
                              </div>
                            </div>
                          </div>
                        {% endif %}
                        <div class="col d-flex flex-column flex-sm-row justify-content-center mb-3">
                          <div class="text-center text-sm-left mb-2 mb-sm-0">
                            <div class="mt-2">
                              <input id="add-vids" type="file" hidden="" name="add-vid" accept="video/*" multiple>
                              <label  class="btn btn-primary" style="background:#121212;border-color:#121212;" for="add-vids">add</label>
                              {% if post.has_vid %}
                                <input id="change-vids" type="file" hidden="" name="change-vid" accept="video/*" multiple>
                                <label  class="btn btn-primary" style="background:#121212;border-color:#121212;" for="change-vids">Change</label>
                                <button class="btn btn-outline" style="color:red" type="button">
                                  <span>Remove</span>
                                </button>
                              {% endif %}
                            </div>
                          </div>
                        </div>
                      </div>  
                    </div>
                    <hr>
                  {% endif %}

                  <div class="tab-content pt-3">
                    <div class="tab-pane active">
                       <div class="row">
                          <div class="col">
                            <div class="row">
                              <div class="col mb-3">
                                <div class="form-group">
                                  <label>Post content</label>
                                  <textarea class="form-control" rows="3" name="content">{{content}}</textarea>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col">
                                <div class="form-group">
                                  <label>Privacy  </label>
                                  <select name="privacy" class="custom-select">
                                    {% for stat in status %}
                                      {% if POST.privacy == stat %}
                                          <option value="{{stat}}" selected>{{stat}}</option>
                                      {% else %}
                                          <option value="{{stat}}">{{stat}}</option>
                                      {% endif %}
                                    {% endfor %}
                                  </select>
                                </div>
                              </div>
                            </div>
                            <br>
                            <div class="row">
                              <div class="col d-flex justify-content-end">
                                <button class="btn btn-primary" style="background:#121212;border-color:#121212;" type="submit">Save Changes</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>   
    </div>
  </div>
</div>
{% endblock body %}

{% block style %}
    body{
        margin-top:20px;
        background:#f8f8f8
    }
{% endblock style %}
